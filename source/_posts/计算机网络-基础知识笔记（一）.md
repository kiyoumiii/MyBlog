---
title: 计算机网络-基础知识笔记（一）
date: 2024-08-02 14:23:45
categories:
- [计算机科学]
tags:
- [计算机网络]
---
## DNS在现代前端中扮演着怎样的角色

DNS的全称是域名系统（Domain Name System）
它的主要功能就是将人们容易记住的域名转换成计算机能理解的IP地址，从而实现正确的网络连接，而执行这项转换任务的便是DNS服务器

DNS服务器除了部署在互联网的各个角落，其实每一台终端设备都会内置本地DNS服务器
DNS查询时，会依次经过应用程序，比如浏览器的缓存、本地hosts、本地DNS服务器、根服务器、顶级域名服务器、权威服务器，最后得到真正的IP地址

作为开发者，我们通常会从域名服务商购买顶级域名，同时服务商也会提供域名解析服务

配置DNS records，最重要的便是A记录和CNAME记录，A记录保存最终要返回的IP地址，而CNAME则是将子域名映射到另一个域名，可以指向相同主域名也可以是其他主域名

这种在A记录上直接填写固定IP地址的方式，只适用于简单的单机部署网站
在大型应用中，应用服务器以分布式方式部署，IP地址是动态变化的，因此，大型应用会采用动态解析IP地址的方式，将同一个域名，根据不同网络运营商、不同地区，解析到不同IP地址的服务器上。
在真实世界中，这些服务器大概率并非最终的应用服务器，而是具备反向代理能力的负载均衡（LB）服务器、WEB应用防火墙（WAF）等等。而真正的应用服务器IP地址是不会暴露于公网环境的。

现代DNS服务器除了具备基本的域名解析功能外，还会提供安全插件（DNSSEC）、DNS分析、利用边缘网络加速解析、DDos防护这些功能。它们都是为了更快、更安全的为用户提供服务

前端熟知的内容分发网络（CDN）与DNS有着密切关系，当不同地区的用户访问前端静态资源时，会从不同的CDN节点下载数据，这归功于DNS系统的CNAME记录，DNS服务器会根据用户所在地区，返回不同的CNAME域名，我们通常称之为CDN加速域名

假设我们的图片资源托管在img.alicdn.com上，如何知道用户实际上会访问到哪台CDN服务器呢
使用nslookup工具依次查询该域名的CNAME和A记录，最终我们会得到CDN服务器的IP地址，它的实际地理位置刚好就是用户所在地附近


真实世界中DNS解析并非一轮完成，它背后会经历多次反复查询，在没有任何缓存的情况下，它会非常慢，以至于显著影响到你的网站打开速度，因此，无论是DNS云服务商还是互联网上的基础设施，都会想尽办法加速DNS解析，诸如：
- 使用高性能的DNS服务器
- 配置DNS缓存
- 增加DNS记录的缓存时间（TTL）等等

作为前端，我们也可以通过浏览器提供的DNS预取功能，来指定需要提前解析的域名，比如：
- 通过在HTML中添加dns-prefetch link标签，可以让浏览器在解析完该标签后立即进行DNS查询，来提升用户后续访问该域名的速度。

- 利用DNS查询原理，我们可以通过修改本地hosts的方式来给项目配置一个域名，而不是直接使用localhost,这能有效解决与服务端联调时，cookie无法跨越传输的问题

- 另外，如果项目依赖中硬编码了线上域名，通过修改本地DNS记录，可以在不改变代码的情况下，将线上域名映射到本地或者联调环境，方便问题验证和多环节联调

